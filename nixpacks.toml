[phases.setup]
nixPkgs = ["jdk17", "maven"]

[phases.install]
cmds = [
  "chmod +x ./mvnw || true",
  "./mvnw clean package -DskipTests || mvn clean package -DskipTests"
]

[start]
cmd = "sh -c 'JAR_FILE=$(find target -name \"*.jar\" -not -name \"*-sources.jar\" -not -name \"*-javadoc.jar\" | head -1) && java -jar \"$JAR_FILE\"'"

